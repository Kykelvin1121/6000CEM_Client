{"version":3,"file":"static/js/974.1236e0dc.chunk.js","mappings":"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","sources":["pages/Cart/Cart.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { DataContainer } from \"../../App\"\r\nimport { Col, Container, Row } from \"react-bootstrap\"\r\nimport { db } from '../../FirebaseConfig'\r\nimport { getAuth } from 'firebase/auth'\r\nimport { collection, addDoc, updateDoc, doc, getDoc, serverTimestamp } from 'firebase/firestore';\r\nimport \"./Cart.css\"\r\nimport \"../../index.css\"\r\nimport { toast } from \"react-toastify\"\r\n\r\nconst Cart = () => {\r\n  const { CartItem, setCartItem, addToCart, decreaseQty, deleteProduct} =useContext(DataContainer);\r\n  const totalPrice = CartItem.reduce((price, item) => price + item.qty * item.price, 0)\r\n  const [selectedWarehouse, setSelectedWarehouse] = useState('');\r\n  const history = useNavigate();\r\n\r\n  const warehouseAddresses = {\r\n    'Warehouse-1': 'Penang International Airport, MAS Cargo Complex, Block A, No 1 Cargo Agent Building, Jalan Garuda, 11900 Bayan Lepas, Penang',\r\n    'Warehouse-2': 'MK6, Lot 1061, Jalan Pengkalan, Bukit Tengah, 14000 Bukit Mertajam, Penang',\r\n    'Warehouse-3': 'Jalan Masjid, 14000 Bukit Mertajam, Penang',\r\n  };\r\n  \r\n  const handleCheckout = async () => {\r\n    const user = getAuth().currentUser;\r\n  \r\n    if (!user) {\r\n      console.log('User is not logged in');\r\n      return;\r\n    }\r\n  \r\n    if (!selectedWarehouse) {\r\n      toast.error('Please select a warehouse.');\r\n      return;\r\n    }\r\n  \r\n    // Check if the selected warehouse has enough quantity\r\n    let hasSufficientQuantity = true;\r\n    for (const item of CartItem) {\r\n      const productDocRef = doc(db, 'products', item.id);\r\n      const productSnapshot = await getDoc(productDocRef);\r\n  \r\n      if (productSnapshot.exists()) {\r\n        const productData = productSnapshot.data();\r\n        const warehouseKey = `wh${selectedWarehouse.slice(-1)}qty`;\r\n  \r\n        if (productData[warehouseKey] < item.qty) {\r\n          hasSufficientQuantity = false;\r\n          toast.error(`Insufficient ${productData.title} in the selected warehouse. Please drop ${productData.title} or change warehouse.`);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  \r\n    if (!hasSufficientQuantity) {\r\n      return;\r\n    }\r\n  \r\n    const ordersCollection = collection(db, 'orders');\r\n    const orderData = {\r\n      userId: user.uid,\r\n      products: CartItem,\r\n      selectedWarehouse: selectedWarehouse,\r\n      totalPrice: totalPrice,\r\n      timeStamp: serverTimestamp(),\r\n      status: 'processing',\r\n    };\r\n  \r\n    const orderDocRef = await addDoc(ordersCollection, orderData);\r\n  \r\n    for (const item of CartItem) {\r\n      const productDocRef = doc(db, 'products', item.id);\r\n      const productSnapshot = await getDoc(productDocRef);\r\n  \r\n      if (productSnapshot.exists()) {\r\n        const productData = productSnapshot.data();\r\n        const warehouseKey = `wh${selectedWarehouse.slice(-1)}qty`;\r\n        const newQuantity = productData[warehouseKey] - item.qty;\r\n        const updateData = { [warehouseKey]: newQuantity };\r\n        await updateDoc(productDocRef, updateData);\r\n      }\r\n    }\r\n  \r\n    setCartItem([]);\r\n    localStorage.removeItem('cartItem');\r\n    history(\"/home\");\r\n    toast.success('Order successfully created!');\r\n  };\r\n  \r\n  \r\n  \r\n  useEffect(()=> {\r\n    window.scrollTo(0,1);\r\n    if(CartItem.length ===0) {\r\n      const storedCart = localStorage.getItem(\"cartItem\");\r\n      setCartItem(JSON.parse(storedCart));\r\n    }\r\n  },[])\r\n  return (\r\n      <section className='cart-items'>\r\n        <Container>\r\n          <Row className=\"justify-content-center\">\r\n              <Col className=\"cartCol\">\r\n                {CartItem.length === 0 && <h1 className='no-items'>No Items are add in Cart</h1>}\r\n                {CartItem.map((item) => {\r\n                  const productQty = item.price * item.qty\r\n                  return (\r\n                    <div className='cart-list' key={item.id}>\r\n                      <Row>\r\n                        <Col className=\"image-holder\">\r\n                          <img src={item.img} alt='' />\r\n                        </Col>\r\n                        <Col sm={8} md={9}>\r\n                          <Row className=\"cart-content justify-content-center\">\r\n                            <Col xs={12} sm={9} className=\"cart-details\">\r\n                              <h3>{item.title}</h3>\r\n                              <h4>\r\n                                RM{item.price}.00 x {item.qty}\r\n                                <span>RM{productQty}.00</span>\r\n                              </h4>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} className='cartControl'>\r\n                              <button className='incCart' onClick={() => addToCart(item)}>\r\n                                <i className='fa-solid fa-plus'></i>\r\n                              </button>\r\n                              <button className='desCart' onClick={() => decreaseQty(item)}>\r\n                                <i className='fa-solid fa-minus'></i>\r\n                              </button>\r\n                            </Col>\r\n                          </Row>\r\n                        </Col>\r\n                        <button className=\"delete\" onClick={()=> deleteProduct(item)}>\r\n                            <ion-icon name=\"close\"></ion-icon>\r\n                        </button>\r\n                      </Row>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </Col>\r\n              <Col md={4} className=\"cartCol\">\r\n                <div className='cart-total'>\r\n                  <h2>Cart Summary</h2>\r\n                  <div className='d_flex'>\r\n                    <h4>Ship From :</h4>\r\n                    <select\r\n                      value={selectedWarehouse}\r\n                      onChange={(e) => setSelectedWarehouse(e.target.value)}\r\n                      className=\"warehouse-select\"\r\n                    >\r\n                      <option value=\"\">Select a Warehouse</option>\r\n                      <option value=\"Warehouse-1\">Warehouse 1</option>\r\n                      <option value=\"Warehouse-2\">Warehouse 2</option>\r\n                      <option value=\"Warehouse-3\">Warehouse 3</option>\r\n                    </select>\r\n                    {selectedWarehouse && (\r\n                      <div className=\"warehouse-address\">\r\n                        <h4>Warehouse Address:</h4>\r\n                        <p>{warehouseAddresses[selectedWarehouse]}</p>\r\n                        <h7>Free Shipping</h7>\r\n                      </div>\r\n                    )}\r\n                    <h4>Total Price :</h4>\r\n                    <h3>RM{totalPrice}.00</h3>\r\n                  </div>\r\n                  <button className=\"checkout-button\" onClick={handleCheckout}>\r\n                    Checkout\r\n                  </button>\r\n                </div>\r\n              </Col>\r\n          </Row>\r\n        </Container>\r\n      </section>\r\n  )\r\n}\r\n\r\nexport default Cart\r\n"],"names":["_useContext","useContext","DataContainer","CartItem","setCartItem","addToCart","decreaseQty","deleteProduct","totalPrice","reduce","price","item","qty","_useState","useState","_useState2","_slicedToArray","selectedWarehouse","setSelectedWarehouse","history","useNavigate","handleCheckout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","hasSufficientQuantity","_iterator","_step","productDocRef","productSnapshot","productData","warehouseKey","ordersCollection","orderData","_iterator2","_step2","_item","_productDocRef","_productSnapshot","_productData","_warehouseKey","newQuantity","updateData","wrap","_context","prev","next","getAuth","currentUser","console","log","abrupt","toast","_createForOfIteratorHelper","s","n","done","value","doc","db","id","getDoc","sent","exists","data","concat","slice","title","t0","e","f","finish","collection","userId","uid","products","timeStamp","serverTimestamp","status","addDoc","_defineProperty","updateDoc","t1","localStorage","removeItem","stop","apply","arguments","useEffect","window","scrollTo","length","storedCart","getItem","JSON","parse","_jsx","className","children","Container","_jsxs","Row","Col","map","productQty","src","img","alt","sm","md","xs","onClick","name","onChange","target"],"sourceRoot":""}