{"version":3,"file":"static/js/926.f8ac2bc1.chunk.js","mappings":"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","sources":["pages/RegisterAndLogin/RegisterAndLogin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { auth, db } from \"../../FirebaseConfig\";\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport logoImage from \"../../Images/Ecom.png\";\r\nimport \"./RegisterAndLogin.css\";\r\nimport \"../../index.css\";\r\n\r\nfunction RegisterAndLogin({ onLogin }) {\r\n  const [login, setLogin] = useState(false);\r\n  const [additionalFields, setAdditionalFields] = useState({\r\n    username: \"\",\r\n    phoneNumber: \"\",\r\n    address: \"\",\r\n    country: \"\",\r\n    displayName: \"\",\r\n  });\r\n  const history = useNavigate();\r\n\r\n  const handleAdditionalFieldChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setAdditionalFields({ ...additionalFields, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e, type) => {\r\n    e.preventDefault();\r\n    const email = e.target.email.value;\r\n    const password = e.target.password.value;\r\n\r\n    try {\r\n      if (type === \"signup\") {\r\n        const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n        const user = userCredential.user;\r\n        const userDocRef = doc(db, \"users\", user.uid);\r\n\r\n        await setDoc(userDocRef, {\r\n          email,\r\n          password,\r\n          role: \"user\",\r\n          ...additionalFields, \r\n          timeStamp: serverTimestamp(),\r\n        });\r\n\r\n        console.log(\"User role and additional fields stored in Firestore\");\r\n        history(\"/home\");\r\n      } else {\r\n        const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n        const user = userCredential.user;\r\n        const userDocRef = doc(db, \"users\", user.uid);\r\n        const docSnapshot = await getDoc(userDocRef);\r\n  \r\n        if (docSnapshot.exists()) {\r\n          const userRole = docSnapshot.data().role;\r\n          onLogin({ role: userRole });\r\n          localStorage.setItem(\"userRole\", userRole);\r\n          history(\"/home\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Authentication error:\", error);\r\n      alert(error.code);\r\n    }\r\n  }\r\n\r\n  const handleReset = () => {\r\n    history(\"/reset\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <img src={logoImage} alt=\"Logo\" className=\"logo\" />\r\n      <div className=\"form-header-container\">\r\n        <div className=\"form-header\">\r\n          <div className={`form-tab ${login ? \"active-tab\" : \"\"}`} onClick={() => setLogin(true)}>\r\n           Sign In\r\n          </div>\r\n        </div>\r\n        <div className=\"form-header\">\r\n          <div className={`form-tab ${!login ? \"active-tab\" : \"\"}`} onClick={() => setLogin(false)}>\r\n           Sign Up\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <h1 className=\"form-title\">{login ? \"Sign In\" : \"Sign Up\"}</h1>\r\n      <form onSubmit={(e) => handleSubmit(e, login ? \"sign in\" : \"sign up\")}>\r\n        <input className=\"form-input\" name=\"email\" placeholder=\"Email\" />\r\n        <input className=\"form-input\" name=\"password\" type=\"password\" placeholder=\"Password\" />\r\n\r\n        {!login && (\r\n          <>\r\n            <input\r\n              className=\"form-input\"\r\n              name=\"username\"\r\n              placeholder=\"Username\"\r\n              value={additionalFields.username}\r\n              onChange={handleAdditionalFieldChange}\r\n            />\r\n            <input\r\n              className=\"form-input\"\r\n              name=\"phoneNumber\"\r\n              placeholder=\"Phone Number\"\r\n              value={additionalFields.phoneNumber}\r\n              onChange={handleAdditionalFieldChange}\r\n            />\r\n            <input\r\n              className=\"form-input\"\r\n              name=\"address\"\r\n              placeholder=\"Address\"\r\n              value={additionalFields.address}\r\n              onChange={handleAdditionalFieldChange}\r\n            />\r\n          </>\r\n        )}\r\n\r\n        <p className=\"forgot-password\" onClick={handleReset}>\r\n          Forgot Password?\r\n        </p>\r\n        <button className=\"form-button\">{login ? \"Sign In\" : \"Sign Up\"}</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterAndLogin;\r\n"],"names":["_ref","onLogin","_useState","useState","_useState2","_slicedToArray","login","setLogin","_useState3","username","phoneNumber","address","country","displayName","_useState4","additionalFields","setAdditionalFields","history","useNavigate","handleAdditionalFieldChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","type","email","password","userCredential","user","userDocRef","_userCredential","_user","_userDocRef","docSnapshot","userRole","wrap","_context","prev","next","preventDefault","createUserWithEmailAndPassword","auth","sent","doc","db","uid","setDoc","role","timeStamp","serverTimestamp","console","log","signInWithEmailAndPassword","getDoc","exists","data","localStorage","setItem","t0","error","alert","code","stop","_x","_x2","apply","arguments","_jsxs","className","children","_jsx","src","logoImage","alt","concat","onClick","onSubmit","placeholder","_Fragment","onChange"],"sourceRoot":""}