"use strict";(self.webpackChunkreact_etechhub=self.webpackChunkreact_etechhub||[]).push([[974],{974:function(e,s,r){r.r(s),r.d(s,{default:function(){return k}});var t=r(4165),a=r(4942),n=r(7762),c=r(5861),i=r(9439),l=r(2791),o=r(7689),u=r(7158),d=r(7022),h=r(9743),x=r(2677),m=r(953),j=r(644),f=r(2481),p=(r(1174),r(9085)),b=r(184),k=function(){var e=(0,l.useContext)(u.c),s=e.CartItem,r=e.setCartItem,k=e.addToCart,v=e.decreaseQty,g=e.deleteProduct,N=s.reduce((function(e,s){return e+s.qty*s.price}),0),C=(0,l.useState)(""),Z=(0,i.Z)(C,2),y=Z[0],w=Z[1],W=(0,o.s0)(),I=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var c,i,l,o,u,d,h,x,b,k,v,g,C,Z,w,I,P,S,A,M;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,j.v0)().currentUser){e.next=4;break}return console.log("User is not logged in"),e.abrupt("return");case 4:if(y){e.next=7;break}return p.Am.error("Please select a warehouse."),e.abrupt("return");case 7:i=!0,l=(0,n.Z)(s),e.prev=9,l.s();case 11:if((o=l.n()).done){e.next=26;break}return u=o.value,d=(0,f.JU)(m.db,"products",u.id),e.next=16,(0,f.QT)(d);case 16:if(!(h=e.sent).exists()){e.next=24;break}if(x=h.data(),b="wh".concat(y.slice(-1),"qty"),!(x[b]<u.qty)){e.next=24;break}return i=!1,p.Am.error("Insufficient ".concat(x.title," in the selected warehouse. Please drop ").concat(x.title," or change warehouse.")),e.abrupt("break",26);case 24:e.next=11;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(9),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:if(i){e.next=36;break}return e.abrupt("return");case 36:return k=(0,f.hJ)(m.db,"orders"),v={userId:c.uid,products:s,selectedWarehouse:y,totalPrice:N,timeStamp:(0,f.Bt)(),status:"processing"},e.next=40,(0,f.ET)(k,v);case 40:e.sent,g=(0,n.Z)(s),e.prev=42,g.s();case 44:if((C=g.n()).done){e.next=59;break}return Z=C.value,w=(0,f.JU)(m.db,"products",Z.id),e.next=49,(0,f.QT)(w);case 49:if(!(I=e.sent).exists()){e.next=57;break}return P=I.data(),S="wh".concat(y.slice(-1),"qty"),A=P[S]-Z.qty,M=(0,a.Z)({},S,A),e.next=57,(0,f.r7)(w,M);case 57:e.next=44;break;case 59:e.next=64;break;case 61:e.prev=61,e.t1=e.catch(42),g.e(e.t1);case 64:return e.prev=64,g.f(),e.finish(64);case 67:r([]),localStorage.removeItem("cartItem"),W("/home"),p.Am.success("Order successfully created!");case 71:case"end":return e.stop()}}),e,null,[[9,28,31,34],[42,61,64,67]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){if(window.scrollTo(0,1),0===s.length){var e=localStorage.getItem("cartItem");r(JSON.parse(e))}}),[]),(0,b.jsx)("section",{className:"cart-items",children:(0,b.jsx)(d.Z,{children:(0,b.jsxs)(h.Z,{className:"justify-content-center",children:[(0,b.jsxs)(x.Z,{className:"cartCol",children:[0===s.length&&(0,b.jsx)("h1",{className:"no-items",children:"No Items are add in Cart"}),s.map((function(e){var s=e.price*e.qty;return(0,b.jsx)("div",{className:"cart-list",children:(0,b.jsxs)(h.Z,{children:[(0,b.jsx)(x.Z,{className:"image-holder",children:(0,b.jsx)("img",{src:e.img,alt:""})}),(0,b.jsx)(x.Z,{sm:8,md:9,children:(0,b.jsxs)(h.Z,{className:"cart-content justify-content-center",children:[(0,b.jsxs)(x.Z,{xs:12,sm:9,className:"cart-details",children:[(0,b.jsx)("h3",{children:e.title}),(0,b.jsxs)("h4",{children:["RM",e.price,".00 x ",e.qty,(0,b.jsxs)("span",{children:["RM",s,".00"]})]})]}),(0,b.jsxs)(x.Z,{xs:12,sm:3,className:"cartControl",children:[(0,b.jsx)("button",{className:"incCart",onClick:function(){return k(e)},children:(0,b.jsx)("i",{className:"fa-solid fa-plus"})}),(0,b.jsx)("button",{className:"desCart",onClick:function(){return v(e)},children:(0,b.jsx)("i",{className:"fa-solid fa-minus"})})]})]})}),(0,b.jsx)("button",{className:"delete",onClick:function(){return g(e)},children:(0,b.jsx)("ion-icon",{name:"close"})})]})},e.id)}))]}),(0,b.jsx)(x.Z,{md:4,className:"cartCol",children:(0,b.jsxs)("div",{className:"cart-total",children:[(0,b.jsx)("h2",{children:"Cart Summary"}),(0,b.jsxs)("div",{className:"d_flex",children:[(0,b.jsx)("h4",{children:"Ship From :"}),(0,b.jsxs)("select",{value:y,onChange:function(e){return w(e.target.value)},className:"warehouse-select",children:[(0,b.jsx)("option",{value:"",children:"Select a Warehouse"}),(0,b.jsx)("option",{value:"Warehouse-1",children:"Warehouse 1"}),(0,b.jsx)("option",{value:"Warehouse-2",children:"Warehouse 2"}),(0,b.jsx)("option",{value:"Warehouse-3",children:"Warehouse 3"})]}),y&&(0,b.jsxs)("div",{className:"warehouse-address",children:[(0,b.jsx)("h4",{children:"Warehouse Address:"}),(0,b.jsx)("p",{children:{"Warehouse-1":"Penang International Airport, MAS Cargo Complex, Block A, No 1 Cargo Agent Building, Jalan Garuda, 11900 Bayan Lepas, Penang","Warehouse-2":"MK6, Lot 1061, Jalan Pengkalan, Bukit Tengah, 14000 Bukit Mertajam, Penang","Warehouse-3":"Jalan Masjid, 14000 Bukit Mertajam, Penang"}[y]}),(0,b.jsx)("h7",{children:"Free Shipping"})]}),(0,b.jsx)("h4",{children:"Total Price :"}),(0,b.jsxs)("h3",{children:["RM",N,".00"]})]}),(0,b.jsx)("button",{className:"checkout-button",onClick:I,children:"Checkout"})]})})]})})})}}}]);
//# sourceMappingURL=974.1236e0dc.chunk.js.map