"use strict";(self.webpackChunkreact_etechhub=self.webpackChunkreact_etechhub||[]).push([[926],{3926:function(e,r,n){n.r(r),n.d(r,{default:function(){return f}});var a=n(4165),s=n(5861),t=n(4942),o=n(1413),c=n(9439),i=n(2791),l=n(953),u=n(644),m=n(2481),d=n(7689),p=n(1169),h=(n(1174),n(184));var f=function(e){var r=e.onLogin,n=(0,i.useState)(!1),f=(0,c.Z)(n,2),x=f[0],g=f[1],v=(0,i.useState)({username:"",phoneNumber:"",address:"",country:"",displayName:""}),b=(0,c.Z)(v,2),N=b[0],j=b[1],k=(0,d.s0)(),w=function(e){var r=e.target,n=r.name,a=r.value;j((0,o.Z)((0,o.Z)({},N),{},(0,t.Z)({},n,a)))},S=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s){var t,c,i,d,p,h,f,x,g,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=n.target.email.value,c=n.target.password.value,e.prev=3,"signup"!==s){e.next=16;break}return e.next=7,(0,u.Xb)(l.I8,t,c);case 7:return i=e.sent,d=i.user,p=(0,m.JU)(l.db,"users",d.uid),e.next=12,(0,m.pl)(p,(0,o.Z)((0,o.Z)({email:t,password:c,role:"user"},N),{},{timeStamp:(0,m.Bt)()}));case 12:console.log("User role and additional fields stored in Firestore"),k("/home"),e.next=25;break;case 16:return e.next=18,(0,u.e5)(l.I8,t,c);case 18:return h=e.sent,f=h.user,x=(0,m.JU)(l.db,"users",f.uid),e.next=23,(0,m.QT)(x);case 23:(g=e.sent).exists()&&(v=g.data().role,r({role:v}),localStorage.setItem("userRole",v),k("/home"));case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(3),console.error("Authentication error:",e.t0),alert(e.t0.code);case 31:case"end":return e.stop()}}),e,null,[[3,27]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"form-container",children:[(0,h.jsx)("img",{src:p,alt:"Logo",className:"logo"}),(0,h.jsxs)("div",{className:"form-header-container",children:[(0,h.jsx)("div",{className:"form-header",children:(0,h.jsx)("div",{className:"form-tab ".concat(x?"active-tab":""),onClick:function(){return g(!0)},children:"Sign In"})}),(0,h.jsx)("div",{className:"form-header",children:(0,h.jsx)("div",{className:"form-tab ".concat(x?"":"active-tab"),onClick:function(){return g(!1)},children:"Sign Up"})})]}),(0,h.jsx)("h1",{className:"form-title",children:x?"Sign In":"Sign Up"}),(0,h.jsxs)("form",{onSubmit:function(e){return S(e,x?"sign in":"sign up")},children:[(0,h.jsx)("input",{className:"form-input",name:"email",placeholder:"Email"}),(0,h.jsx)("input",{className:"form-input",name:"password",type:"password",placeholder:"Password"}),!x&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{className:"form-input",name:"username",placeholder:"Username",value:N.username,onChange:w}),(0,h.jsx)("input",{className:"form-input",name:"phoneNumber",placeholder:"Phone Number",value:N.phoneNumber,onChange:w}),(0,h.jsx)("input",{className:"form-input",name:"address",placeholder:"Address",value:N.address,onChange:w})]}),(0,h.jsx)("p",{className:"forgot-password",onClick:function(){k("/reset")},children:"Forgot Password?"}),(0,h.jsx)("button",{className:"form-button",children:x?"Sign In":"Sign Up"})]})]})}}}]);
//# sourceMappingURL=926.f8ac2bc1.chunk.js.map